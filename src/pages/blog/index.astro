---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

const posts = await getCollection('blog');
const sortedPosts = posts.sort(
  (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---

<BaseLayout title="Blog" description="Blog posts">
  <main class="min-h-screen px-6 py-16 md:px-12">
    <div class="max-w-2xl mx-auto">
      <header class="mb-12">
        <a
          href="/"
          class="text-sm text-gray-500 hover:text-gray-300 focus:text-gray-300 transition-colors focus:outline-none"
        >
          &larr; Home
        </a>
        <h1 class="text-3xl font-light text-gray-100 mt-6">Blog</h1>
      </header>

      <ul class="space-y-6">
        {
          sortedPosts.map((post) => (
            <li>
              <a
                href={`/blog/${post.slug}/`}
                class="block p-5 -mx-5 rounded-lg hover:bg-white/[0.03] focus:bg-white/[0.03] transition-colors focus:outline-none group"
              >
                <h2 class="font-medium text-gray-200 group-hover:text-gray-100">
                  {post.data.title}
                </h2>
                <p class="text-sm text-gray-400 mt-1">
                  {post.data.description}
                </p>
                <p class="text-xs text-gray-500 mt-2">{post.data.date}</p>
              </a>
            </li>
          ))
        }
      </ul>
    </div>
  </main>
</BaseLayout>
